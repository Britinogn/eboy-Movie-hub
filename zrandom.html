<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <template>
    <h1 class="text-2xl md:py-34 font-bold  py-28 text-center">Users Dashboard</h1>

    <!-- Loading -->
    <div v-if="loading" class="text-blue-500">Loading Users..........</div>

    <!-- users list -->

    <div v-else class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 ">

        <div v-for="movie in movies" 
            :key="movie.id"
            class="bg-white/60 shadow p-4 rounded-lg flex flex-col hover:bg-amber-200 items-center ">
        
            <img :src="movie.image" 
            alt="avatar" 
            class="w-20 h-20 rounded-full mb-3 "
            />

            <h2 class="text-lg font-semibold  ">{{ movie.title }} {{ movie.categories }} </h2>
            <p class="text-gray-500   ">{{ movie.link }}</p>

            
        </div>
    </div>
    
</template>
</body>
</html>

<script>
import { getUpcomingMovies } from "../services/api";

export default{
    data(){
        return{
            movies: [],
            loading: false,
        };
    },

    methods:{
        async fetchMovies() {
            this.loading = true;
            try {
                const res = await getUpcomingMovies();
                this.movies = res.data.movies.flatMap(group => group.list);;
                this.$toast.success('Movies fetched successfully!');
            
            } catch (error) {
                // console.error(err);
                console.log(error);
                this.$toast.error('Failed to fetch Movies.');
            
            } finally{
                this.loading = false;
            }
        },
      
    },

    mounted(){
        this.fetchMovies();
    },
};

</script>


<!--  -->






